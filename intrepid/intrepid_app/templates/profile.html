{% extends "map_base.html" %}

{% block initialize_map %}
    {% if profile_user.profile.hometown.name %}
      var loc = new google.maps.LatLng({{profile_user.profile.hometown.lat}},{{profile_user.profile.hometown.lon}});
    {% else %}
      var loc = new google.maps.LatLng(0,0);
    {% endif %}

		var mapOptions = {
		      center: loc,
          zoom: 3,
          mapTypeId: google.maps.MapTypeId.TERRAIN,
          mapTypeControl: false,
          panControl: true,
          zoomControl: true,
          streetViewControl: false
        };
        map = new google.maps.Map($("#map-canvas")[0], mapOptions);
    {% if profile_user.profile.hometown.name %}
		var marker = new google.maps.Marker({	
				position: loc,
			});
		marker.setMap(map);
    {% endif %}
{% endblock %}

{% block content %}
  	<div class="insert-holder">
      {% if profile_user.profile.image %}
      <img class="insert-image" src="{{profile_user.profile.image.url}}" />
      {% else %}
      <img class="insert-image" src="http://placekitten.com/500/500"/>
      {% endif %}
  	</div>
    <div class="header-div">
  	{% if profile_user.first_name %}
  	<h2 class="title-text">{{profile_user.first_name}} {{profile_user.last_name}}</h2>
  	{% else %}
  	<h2 class="title-text">{{profile_user.username}}</h2>
  	{% endif %}
  	{% if profile_user.profile.hometown.name %}
  	<p class="minor-text">{{profile_user.profile.hometown.name}}</p>
  	{% else %}
  	<p class="minor-text">&nbsp;</p>
  	{% endif %}
    </div>
  	<div class="blurb"> {{profile_user.profile.text}} </div>

    {% if profile_user.trip_set.all %}
  	<div class="trip-list">
    <h3 class="subtitle">Trips</h3>
  	{% for trip in profile_user.trip_set.all %}
  		<div class="trip-item link-item" href="/trip/{{trip.id}}">
        <div class="link-image-div"> <img class="link-image" src="http://placekitten.com/500/300"></div>
        <p class="trip-link">{{trip.name}}</a>
        </div>
  	{% endfor %}
  	</div>
    {% endif %}

    {% if edit %}
    <div class="edit-button link-item" href="/profile/{{profile_user.username}}/edit"> Edit </div>
    {% endif %}

{% endblock %}