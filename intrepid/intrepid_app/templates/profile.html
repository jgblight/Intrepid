{% extends "map_base.html" %}

{% block initialize_map %}
    {% if profile_user.profile.hometown.name %}
      var loc = new google.maps.LatLng({{profile_user.profile.hometown.lat}},{{profile_user.profile.hometown.lon}});
    {% else %}
      var loc = new google.maps.LatLng(0,0);
    {% endif %}

		var mapOptions = {
		      center: loc,
          zoom: 3,
          mapTypeId: google.maps.MapTypeId.TERRAIN,
          mapTypeControl: false,
          panControl: true,
          zoomControl: true,
          streetViewControl: false
        };
        map = new google.maps.Map($("#map-canvas")[0], mapOptions);
    {% if profile_user.profile.hometown.name %}
		var marker = new google.maps.Marker({	
				position: loc,
        icon : { url : '/static/pin_2.svg',
            scaledSize : new google.maps.Size(30,45,'px','px'),
            size : new google.maps.Size(30,45,'px','px') }
			});
		marker.setMap(map);
    {% endif %}
    {% for trip in profile_user.trip_set.all %}
    {% for pin in trip.pins %}
      loc = new google.maps.LatLng({{pin.location.lat}},{{pin.location.lon}})
      marker = new google.maps.Marker({ 
        position: loc,
        icon : { url : '/static/pin_2.svg',
            scaledSize : new google.maps.Size(26,39,'px','px'),
            size : new google.maps.Size(26,39,'px','px') }
      });
      marker.setMap(map);
    {% endfor %}
    {% endfor %}

{% endblock %}

{% block content %}
  	<div class="insert-holder">
      <img class="insert-image" src="{{profile_user.profile.get_image_url}}" />
  	</div>
    <div class="header-div">
  	<h2 class="title-text">{{profile_user.profile.get_name}}</h2>
  	<p class="minor-text">{{profile_user.profile.get_hometown}}</p>
    </div>
  	<div class="blurb"> {{profile_user.profile.text}} </div>

  	<div class="trip-list">
    <h3 class="subtitle">Adventures</h3>
    {% if profile_user.trip_set.all %}
  	{% for trip in profile_user.trip_set.all %}
  		<div class="trip-item link-item" href="/trip/{{trip.id}}">
        <div class="link-image-div"> <img class="link-image" src="{{trip.get_image_url}}"></div>
        <p class="trip-link">{{trip.name}}</a>
        </div>
  	{% endfor %}
    {% else %}
      <p class="blurb">No adventures yet..</p>
    {% endif %}
  	</div>

    {% if edit %}
    <div class="edit-button link-item" href="/profile/{{profile_user.username}}/edit"> Edit </div>
    {% endif %}

{% endblock %}