{% extends 'map_base.html' %}

  {% block initialize_script %}
	var searchbox = new google.maps.places.Autocomplete(document.getElementById("id_loc_name"));

	google.maps.event.addListener(searchbox, 'place_changed', function() {
		var place = searchbox.getPlace();
		$("#id_lat").val(place.geometry.location.lat());
		$("#id_lon").val(place.geometry.location.lng());
		var marker = new google.maps.Marker({
			position: place.geometry.location,
			title: place.name,
			map: map
		});
		map.setCenter(marker.getPosition());
		map.setZoom(10);
	});	

	$("input").addClass("form-control")
    $("textarea").addClass("form-control")
    $("id_trip").addClass("form-control")
  {% endblock %}

  {% block content %}
  {% load bootstrap %}
  	<h3 class="title-text"> New Post </h3>
	<form action="/post/new" enctype="multipart/form-data" method="post">{% csrf_token %}
	  {{ form.non_field_errors }}
      {{ form.image_x }}
      {{ form.image_y }}
      {{ form.image_width }}
      {{ form.lat }}
      {{ form.lon }}
      <div class="form-group">{{ form.trip }}</div>
      <div class="form-group">{{ form.name }}</div>
      <div class="form-group">{{ form.loc_name }}</div>
      <div class="form-group">{{ form.date }}</div>
      <div class="form-group form-inline"><label class="control-label">{{ form.tracks }} make tracks? </label></div>
      <div class="form-group">{{ form.description }}</div>
	<input type="submit" class="btn btn-default" value="Create" />
	</form>
  {% endblock %}